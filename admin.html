<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ê–¥–º–∏–Ω–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9fafb;
      margin: 0;
      padding: 0;
    }
    header {
      background: #0096c7;
      color: #fff;
      text-align: center;
      padding: 1rem;
      font-size: 1.4rem;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 1rem;
    }
    h2 {
      margin-top: 1.5rem;
      color: #0096c7;
    }
    select, input, button {
      padding: 0.5rem 0.8rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      margin: 0.2rem 0;
    }
    button {
      cursor: pointer;
      background: #0096c7;
      color: white;
      border: none;
      transition: 0.2s;
    }
    button:hover {
      background: #0077a6;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 0.8rem;
      border: 1px solid #ddd;
      text-align: left;
    }
    th {
      background: #f0faff;
    }
    .actions button {
      margin-right: 0.3rem;
    }
    .form-inline {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .form-inline input {
      flex: 1;
    }
  </style>
</head>
<body>
  <header>–ê–¥–º–∏–Ω–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤</header>
  <div class="container">
    <label for="region">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω:</label>
    <select id="region">
      <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
      <option value="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å">–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å</option>
      <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
    </select>

    <h2>–¢–∞—Ä–∏—Ñ—ã</h2>
    <table id="tariff-table">
      <thead>
        <tr>
          <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th>–°–∫–æ—Ä–æ—Å—Ç—å</th>
          <th>–¶–µ–Ω–∞ (‚ÇΩ/–º–µ—Å)</th>
          <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</h2>
    <div class="form-inline">
      <input type="text" id="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞">
      <input type="text" id="speed" placeholder="–°–∫–æ—Ä–æ—Å—Ç—å">
      <input type="number" id="price" placeholder="–¶–µ–Ω–∞">
      <button id="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
  </div>

  <script>
    const defaultTariffs = {
      "–ú–æ—Å–∫–≤–∞": [
        {name:"–ë–∏–∑–Ω–µ—Å-100", speed:"100 –ú–±–∏—Ç/—Å", price:1200},
        {name:"–ë–∏–∑–Ω–µ—Å-300", speed:"300 –ú–±–∏—Ç/—Å", price:2500},
        {name:"–ë–∏–∑–Ω–µ—Å-1000", speed:"1 –ì–±–∏—Ç/—Å", price:4900}
      ],
      "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å": [
        {name:"–ú–û-50", speed:"50 –ú–±–∏—Ç/—Å", price:900},
        {name:"–ú–û-200", speed:"200 –ú–±–∏—Ç/—Å", price:1900}
      ],
      "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥": [
        {name:"–°–ü–ë-100", speed:"100 –ú–±–∏—Ç/—Å", price:1000},
        {name:"–°–ü–ë-500", speed:"500 –ú–±–∏—Ç/—Å", price:2700}
      ]
    };

    // –ø–æ–ª—É—á–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã –∏–∑ localStorage
    function loadTariffs() {
      return JSON.parse(localStorage.getItem("tariffs")) || defaultTariffs;
    }

    // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã –≤ localStorage
    function saveTariffs(data) {
      localStorage.setItem("tariffs", JSON.stringify(data));
    }

    const regionSelect = document.getElementById("region");
    const tableBody = document.querySelector("#tariff-table tbody");
    const addBtn = document.getElementById("add-btn");

    function renderTable(region) {
      const tariffs = loadTariffs();
      const list = tariffs[region] || [];
      tableBody.innerHTML = "";
      list.forEach((t, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${t.name}</td>
          <td>${t.speed}</td>
          <td>${t.price}</td>
          <td class="actions">
            <button onclick="editTariff('${region}',${index})">‚úèÔ∏è</button>
            <button onclick="deleteTariff('${region}',${index})">üóëÔ∏è</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function addTariff(region, name, speed, price) {
      const tariffs = loadTariffs();
      if (!tariffs[region]) tariffs[region] = [];
      tariffs[region].push({name, speed, price});
      saveTariffs(tariffs);
      renderTable(region);
    }

    function deleteTariff(region, index) {
      const tariffs = loadTariffs();
      tariffs[region].splice(index,1);
      saveTariffs(tariffs);
      renderTable(region);
    }

    function editTariff(region, index) {
      const tariffs = loadTariffs();
      const t = tariffs[region][index];
      const name = prompt("–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞:", t.name);
      const speed = prompt("–°–∫–æ—Ä–æ—Å—Ç—å:", t.speed);
      const price = prompt("–¶–µ–Ω–∞:", t.price);
      if (name && speed && price) {
        tariffs[region][index] = {name, speed, price: parseInt(price)};
        saveTariffs(tariffs);
        renderTable(region);
      }
    }

    // —Å–æ–±—ã—Ç–∏—è
    regionSelect.addEventListener("change", ()=>renderTable(regionSelect.value));
    addBtn.addEventListener("click", ()=>{
      const name = document.getElementById("name").value.trim();
      const speed = document.getElementById("speed").value.trim();
      const price = parseInt(document.getElementById("price").value.trim());
      if (name && speed && price) {
        addTariff(regionSelect.value, name, speed, price);
        document.getElementById("name").value="";
        document.getElementById("speed").value="";
        document.getElementById("price").value="";
      }
    });

    // init
    renderTable(regionSelect.value);
  </script>
</body>
</html>
